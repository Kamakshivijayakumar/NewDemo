version: 2.1
jobs: 
  build: 
    docker: 
      - image: "circleci/ruby:2.5.1-node-browsers"
    steps: 
      - checkout
      - run: 
           name: "Demonstrate that Mongo DB is available as localhost"
           command:  apt update && apt -y install jq


  deploy: 
    docker: 
      - image: "circleci/ruby:2.5.1-node-browsers"
    steps:      
      - checkout
      - run: "echo \"this is the build job\""
  test: 
    docker: 
      - image: "circleci/ruby:2.5.1-node-browsers"
    steps: 
      - checkout
      - run: "echo \"this is the build job\""
workflows: 
  build_and_test: 
    jobs: 
      - build
      - 
        test: 
          requires: 
            - build
      - 
        hold: 
          requires: 
            - build
            - test
          type: approval
      - 
        deploy: 
          requires: 
            - hold
